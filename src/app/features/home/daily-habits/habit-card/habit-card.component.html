<p-card class="habit-card">
  <ng-template pTemplate="title">
    <div class="habit-title">
      <i class="pi" [ngClass]="habit.tipo === 'bueno' ? 'pi-smile' : 'pi-frown'"
        [style.color]="habit.tipo === 'bueno' ? '#4caf50' : '#f44336'"></i>
      <span>{{ habit.nombre }}</span>
    </div>
  </ng-template>

  <div class="habit-desc" *ngIf="habit.descripcion">{{ habit.descripcion }}</div>

  <div class="habit-meta">
    <i class="pi pi-bullseye"></i>
    <span><strong>Meta:</strong> {{ habit.objetivo }} {{ habit.unidadObjetivo }} – {{ habit.frecuencia }}</span>
  </div>

  <div class="habit-progress" *ngIf="habit.tipo === 'bueno'">
    <i class="pi pi-chart-line" [style.color]="progressColor"></i>
    <span>Progreso: <strong [style.color]="progressColor">{{ progress }}</strong> / {{ habit.objetivo }}</span>
  </div>

  <div class="habit-progress" *ngIf="habit.tipo === 'malo'">
    <i class="pi pi-exclamation-triangle" [style.color]="progressColor"></i>
    <span>Incidencias: <strong [style.color]="progressColor">{{ progress }}</strong></span>
  </div>

  <div class="habit-actions">
    <button pButton label="Registro Rápido" icon="pi pi-plus-circle" class="p-button-sm p-button-success"
      (click)="quickLog.emit(habit)">
    </button>

    <app-weekly-status-bar [habit]="habit" [logs]="logs" (selectDate)="handleRetroLog($event)">
    </app-weekly-status-bar>
  </div>
</p-card>