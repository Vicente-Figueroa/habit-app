<div class="home-container">
  <!-- Encabezado general -->
  <div class="home-header">
    <div class="date-time">
      <span>{{ today() | date: 'EEEE d MMMM' : 'es-CL' }}</span>
      <span class="time">{{ today() | date: 'shortTime' : 'es-CL' }}</span>
    </div>

    <div class="welcome-text">
      <h2>Bienvenido de nuevo 👋</h2>
      <p class="motivational">“{{ motivationalText }}”</p>
    </div>
  </div>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="main-content">
    <!-- HABITS O ONBOARDING -->
    <ng-container *ngIf="habitSignal.habits().length === 0; else habitsData">
      <section class="onboarding">
        <h3>Empieza aquí</h3>
        <ol>
          <li><strong>Crea categorías</strong> – como Salud o Productividad</li>
          <li><strong>Agrega hábitos</strong> – buenos o malos, tú eliges</li>
          <li><strong>Configura frecuencia</strong> – diaria, mensual o libre</li>
          <li><strong>Haz log</strong> – registra tus hábitos día a día</li>
        </ol>
        <p class="cta">💪 ¡Hoy es un buen día para comenzar!</p>
      </section>
    </ng-container>

    <ng-template #habitsData>
      <app-daily-habits
        [habits]="todaysHabits"
        [logs]="logSignal.logs()"
        (quickLog)="onQuickLog($event)">
      </app-daily-habits>
    </ng-template>

    <!-- HABITS FALLIDOS -->
    <section *ngIf="getFailedHabitsYesterday().length" class="habit-warnings">
      <details>
        <summary>⚠️ Hábitos no cumplidos ayer ({{ getFailedHabitsYesterday().length }})</summary>
        <ul>
          <li *ngFor="let habit of getFailedHabitsYesterday()">
            {{ habit.nombre }} – objetivo: {{ habit.objetivo }} {{ habit.unidadObjetivo }}
          </li>
        </ul>
      </details>
    </section>
  </div>

  <!-- MODAL -->
  <p-dialog [(visible)]="showConfirmation" modal [closable]="false" header="✔️ Log registrado">
    <p>{{ confirmationMessage }}</p>
    <button pButton label="Cerrar" class="p-mt-2" (click)="closeConfirmation()"></button>
  </p-dialog>
</div>
